<script>
    const exams = [
        { name: "SSC CGL Tier-1", date: "2025-08-13" },
        { name: "SSC CHSL Tier-1", date: "2025-09-08" },
        { name: "SSC CPO Tier-1", date: "2025-09-01" },
        { name: "DP CONSTABLE", date: "2025-11-01" },
        { name: "SSC GD", date: "2026-01-01" }
    ];

    const tableBody = document.getElementById("countdown-table");
    const errorMessage = document.getElementById("error-message");

    function updateCountdown() {
        try {
            tableBody.innerHTML = "";
            const today = new Date();

            if (!exams || exams.length === 0) {
                throw new Error("No exam data available.");
            }

            exams.forEach(exam => {
                const examDate = new Date(exam.date + "T00:00:00");
                if (isNaN(examDate.getTime())) {
                    console.error(`Invalid date for exam: ${exam.name}`);
                    return;
                }

                const diffTime = examDate.getTime() - today.getTime();
                const diffDays = Math.floor(diffTime / (1000 * 60 * 60 * 24));
                const diffHours = Math.floor((diffTime % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                const diffMinutes = Math.floor((diffTime % (1000 * 60 * 60)) / (1000 * 60));
                const diffSeconds = Math.floor((diffTime % (1000 * 60)) / 1000);

                let countdownText = "";
                let countdownClass = "";

                if (diffTime > 0) {
                    countdownText = `<span>${diffDays} days</span> <span>${diffHours}h</span> <span>${diffMinutes}m</span> <span>${diffSeconds}s</span>`;
                    countdownClass = "";
                } else if (diffTime > -86400000) {
                    countdownText = "Exam Day!";
                    countdownClass = "exam-day";
                } else {
                    countdownText = "Completed";
                    countdownClass = "completed";
                }

                const row = document.createElement("tr");
                row.innerHTML = `
                    <td>${exam.name}</td>
                    <td>${examDate.toLocaleDateString("en-IN", { day: '2-digit', month: 'long', year: 'numeric' })}</td>
                    <td><span class="countdown ${countdownClass}">${countdownText}</span></td>
                `;
                tableBody.appendChild(row);
            });

            if (tableBody.children.length === 0) {
                throw new Error("No rows were added to the table.");
            }

            errorMessage.style.display = "none";
        } catch (error) {
            console.error("Error updating countdown:", error);
            errorMessage.style.display = "block";
            errorMessage.textContent = "Unable to load exam data. Please try refreshing the page or contact support.";
        }
    }

    function toggleDarkMode() {
        document.body.classList.toggle("dark-mode");
    }

    updateCountdown();
    setInterval(updateCountdown, 1000); // update every second
</script>
